<div class="list-container">
  <div class="list-card">
    <div class="header">
      <h1>Ã“rdenes de Trabajo</h1>
      <button class="btn-crear" (click)="crearOrden()">âœš Nueva Orden</button>
    </div>

    <div class="filtro-section">
      <input type="text" 
             [(ngModel)]="filtro" 
             (ngModelChange)="onFiltroChange()"
             placeholder="Buscar por cÃ³digo, cliente o descripciÃ³n..."
             class="filtro-input">
    </div>

    <div *ngIf="cargando" class="loading-center">
      <div class="spinner"></div>
      <p>Cargando Ã³rdenes...</p>
    </div>

    <div *ngIf="!cargando && ordenesFiltradas.length === 0" class="empty-state">
      <p>{{ filtro ? 'No se encontraron Ã³rdenes que coincidan' : 'No hay Ã³rdenes de trabajo registradas' }}</p>
    </div>

    <div *ngIf="!cargando && ordenesFiltradas.length > 0" class="table-wrapper">
      <table class="ordenes-table">
        <thead>
          <tr>
            <th>CÃ³digo</th>
            <th>Cliente</th>
            <th>DescripciÃ³n</th>
            <th>Estado</th>
            <th>Monto</th>
            <th>Fecha Inicio</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let orden of ordenesFiltradas" [class.completada]="orden.estado === 'COMPLETADA'">
            <td class="codigo">{{ orden.codigo }}</td>
            <td>{{ orden.cliente.nombre }}</td>
            <td class="descripcion">{{ (orden.descripcion | slice:0:40) }}{{ (orden.descripcion.length > 40) ? '...' : '' }}</td>
            <td>
              <span class="badge" 
                    [style.background-color]="getEstadoColor(orden.estado)"
                    [style.color]="getEstadoTextColor(orden.estado)">
                {{ orden.estado }}
              </span>
            </td>
            <td class="monto">${{ orden.total | number:'1.2-2' }}</td>
            <td class="fecha">{{ orden.fechaInicio | date:'dd/MM/yyyy' }}</td>
            <td class="acciones">
              <button class="btn-accion btn-ver" 
                      title="Ver detalles"
                      (click)="verDetalle(orden.id)">
                ğŸ‘ï¸
              </button>
              <button class="btn-accion btn-editar" 
                      title="Editar"
                      [disabled]="orden.estado === 'COMPLETADA' || orden.estado === 'CANCELADA'"
                      (click)="editar(orden.id)">
                âœï¸
              </button>
              <button class="btn-accion btn-eliminar" 
                      title="Eliminar"
                      (click)="eliminar(orden)">
                ğŸ—‘ï¸
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
